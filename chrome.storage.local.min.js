!function(a){if(!(chrome&&chrome.storage&&chrome.storage.local)&&a.localStorage){var b=a.localStorage,c="chrome.storage.local.",d={set:function(d,e){a.setTimeout(function(){for(var f=Object.keys(d),g=0;g<f.length;g++)b.setItem(c+f[g],JSON.stringify(d[f[g]]));e&&a.setTimeout(e,0)},0)},get:function(d,e){a.setTimeout(function(){var a=[],f={},g={},h=0,i="";if(null===d)for(h=0;h<b.length;h++)i=b.key(h),i.substr(0,c.length)===c&&(g[i.substr(c.length)]=JSON.parse(b.getItem(i)));else{switch(Object.prototype.toString.call(d)){case"[object Array]":a=d;break;case"[object Object]":a=Object.keys(d),f=d;break;case"[object String]":a=[d]}for(h=0;h<a.length;h++)i=a[h],b.hasOwnProperty(c+i)?g[i]=JSON.parse(b.getItem(c+i)):f.hasOwnProperty(i)&&(g[i]=f[i])}e&&e(g)},0)},getBytesInUse:function(b,c){a.setTimeout(function(){c(-1)},0)},remove:function(d,e){a.setTimeout(function(){var a=[];for(a="string"==typeof d?[d]:d,i=0;i<a.length;i++)key=a[i],b.hasOwnProperty(c+key)&&b.removeItem(c+key);e&&e()},0)},clear:function(){for(i=b.length;i>0;i--)key=b.key(i-1),key.substr(0,c.length)===c&&b.removeItem(key)}};a.chrome?a.chrome.storage={local:d}:a.chrome={storage:{local:d}}}}(this);